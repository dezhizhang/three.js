<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script type="text/javascript" src="./js/three.js"></script>
    <script type="text/javascript" src="./js/SceneUtils.js"></script>
</head>
<body>
    <script type="text/javascript">
        let scene = new THREE.Scene();
        let camera = new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,0.1,1000);
        camera.position.x = -30;
        camera.position.y = 40;
        camera.position.z = 40;
        camera.lookAt(scene.position);

        //渲染器
        let renderer = new THREE.WebGLRenderer();
        renderer.setClearColor(new THREE.Color(0xEEEEEE));
        renderer.setSize(window.innerWidth,window.innerHeight);
        renderer.shadowMap.enabled = true;

        //定义平面
        let planeGeometry = new THREE.PlaneGeometry(70,50,1,1);
        let planeMaterial = new THREE.MeshLambertMaterial({color:0x00ff00});
        let plane = new THREE.Mesh(planeGeometry,planeMaterial);
        plane.rotation.x = -0.5 * Math.PI;
        plane.position.x = 0;
        plane.position.y = 0;
        
        //添加到场景中
        scene.add(plane);

        //定义光源
        let light = new THREE.AmbientLight(0xffffff);
        scene.add(light);
        //定义点光源
        let spotLight = new THREE.SpotLight(0xffffff);
        spotLight.position.set(-40,60,-10);
        spotLight.castShadow = true;

        //定义一个方块
        //设置8个顶点
        let vertices = [
            new THREE.Vector3(1, 3, 1),
            new THREE.Vector3(1, 3, -1),
            new THREE.Vector3(1, -1, 1),
            new THREE.Vector3(1, -1, -1),
            new THREE.Vector3(-1, 3, -1),
            new THREE.Vector3(-1, 3, 1),
            new THREE.Vector3(-1, -1, -1),
            new THREE.Vector3(-1, -1, 1)
        ]

        //设置6个面
        let faces = [
            new THREE.Face3(0, 2, 1),
            new THREE.Face3(2, 3, 1),
            new THREE.Face3(4, 6, 5),
            new THREE.Face3(6, 7, 5),
            new THREE.Face3(4, 5, 1),
            new THREE.Face3(5, 0, 1),
            new THREE.Face3(7, 6, 2),
            new THREE.Face3(6, 3, 2),
            new THREE.Face3(5, 7, 0),
            new THREE.Face3(7, 2, 0),
            new THREE.Face3(1, 3, 4),
            new THREE.Face3(3, 6, 4),
        ]

        //创建几何体
        let geom = new THREE.Geometry();
        geom.vertices = vertices;
        geom.faces = faces;
        geom.computeFaceNormals();

        //增加材质
        let materials = [
            new THREE.MeshLambertMaterial({
                opacity:0.5,
                color:0x44ff44,
                transparent:true
            }),
            new THREE.MeshBasicMaterial({color:0x000000,wireframe:true})
        ]

        //构成物体
        let mesh = new THREE.SceneUtils.createMultiMaterialObject(geom,materials);

        mesh.children.forEach(function(e){
            e.castShadow = true
        })

        scene.add(mesh);

        renderer.render(scene,camera);
        document.body.appendChild(renderer.domElement);
         
    </script>
</body>
</html>