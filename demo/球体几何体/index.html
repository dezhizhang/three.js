<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>球体几何体</title>
    <script type="text/javascript" src="../libs/three.js"></script>
    <script type="text/javascript" src="../libs/stats.js"></script>
    <script type="text/javascript" src="../libs/dat.gui.js"></script>
    <style>
        body{
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
    </style>
</head>
<body>
    <div id="stats">
    </div>
        <div id="box">
    </div>
<script type="text/javascript">

    let step = 0
    function init() {

        let stats = initStats();
        let scene = new THREE.Scene();
        
        let camera = new THREE.PerspectiveCamera(45,window.innerWidth / window.innerHeight,0.1,1000);
        camera.position.x = -20;
        camera.position.y = 30;
        camera.position.z = 40;
        camera.lookAt(new THREE.Vector3(10,0,0));


        let renderer = new THREE.WebGLRenderer();
        renderer.setClearColor(new THREE.Color(0xEEEEEE,1.0));
        renderer.setSize(window.innerWidth,window.innerHeight);
        renderer.shadowMapEnabled = true;
        
        let sphere = createMesh(new THREE.SphereGeometry(4,10,10));
        scene.add(sphere);

        let oBox = document.getElementById('box');
        oBox.appendChild(renderer.domElement);

    
        let controls = new function() {
            this.radius = sphere.children[0].geometry.parameters.radius;
            this.widthSegments = sphere.children[0].geometry.parameters.widthSegments;
            this.heightSegments = sphere.children[0].geometry.parameters.heightSegments;
            this.phiStart = 0;
            this.phiLength = Math.PI * 2;
            this.thetaStart = 0;
            this.thetaLength = Math.PI;

            this.redraw = function() {
                scene.remove(sphere);
                sphere = createMesh(new THREE.SphereGeometry(controls.radius,controls.widthSegments,controls.heightSegments,controls.phiStart,controls.phiLength,controls.thetaStart,controls.thetaLength));
                scene.add(sphere);
            }
        }

    
        let gui = new dat.GUI();
        gui.add(controls,'radius',0,40).onChange(controls.redraw);
        gui.add(controls,'widthSegments',0,20).onChange(controls.redraw);
        gui.add(controls,'heightSegments',0,20).onChange(controls.redraw);
        gui.add(controls,'phiStart',0,2 * Math.PI).onChange(controls.redraw);
        gui.add(controls,'phiLength',0,2 * Math.PI).onChange(controls.redraw);
        gui.add(controls,'thetaStart',0,2 * Math.PI).onChange(controls.redraw);
        gui.add(controls,'thetaLength',0,2 * Math.PI).onChange(controls.redraw);


        render();

        function createMesh(geom) {
            let meshMaterial = new THREE.MeshNormalMaterial();
            meshMaterial.side = THREE.DoubleSide;
            let wireFrameMat = new THREE.MeshBasicMaterial();
            wireFrameMat.wireframe = true;

            let mesh = THREE.SceneUtils.createMultiMaterialObject(geom,[meshMaterial,wireFrameMat]);
            return mesh;
        }

 
        function render() {
            stats.update();
            sphere.rotation.y = step += 0.01;
            requestAnimationFrame(render);
            renderer.render(scene,camera);
        }

     
        function initStats() {
            let stats = new Stats();
            stats.setMode(0);
            stats.domElement.style.position = 'absolute';
            stats.domElement.style.left = '0px';
            stats.domElement.style.top = '0px';
            let oStats = document.getElementById('stats');
            oStats.appendChild(stats.domElement);
            return stats;
        }
    }
    window.onload = init;
</script>
</body>
</html>